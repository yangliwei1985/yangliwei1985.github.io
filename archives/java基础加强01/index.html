<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Java基础加强01 | ylw&#39;s blog</title>
<meta name="keywords" content="基础加强" />
<meta name="description" content="1.类加载器 1.1类加载器【理解】   作用
负责将.class文件（存储的物理文件）加载在到内存中
  1.2类加载的过程【理解】   类加载时机
 创建类的实例（对象） 调用类的类方法 访问类或者接口的类变量，或者为该类变量赋值 使用反射方式来强制创建某个类或接口对应的java.lang.Class对象 初始化某个类的子类 直接使用java.exe命令来运行某个主类    类加载过程
  加载
 通过包名 &#43; 类名，获取这个类，准备用流进行传输 在这个类加载到内存中 加载完毕创建一个class对象    链接
  验证
确保Class文件字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身安全
(文件中的信息是否符合虚拟机规范有没有安全隐患)
    准备
负责为类的类变量（被static修饰的变量）分配内存，并设置默认初始化值
(初始化静态变量)
    解析
将类的二进制数据流中的符号引用替换为直接引用
(本类中如果用到了其他类，此时就需要找到对应的类)
    初始化
根据程序员通过程序制定的主观计划去初始化类变量和其他资源
(静态变量赋值以及初始化其他资源)
    小结
 当一个类被使用的时候，才会加载到内存 类加载的过程: 加载、验证、准备、解析、初始化    1.">
<meta name="author" content="">
<link rel="canonical" href="https://iblog.zone/archives/java%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%BC%BA01/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.7af5e4f048c756d5896f15b3f7cd7ee898ea1b3b101fcb40abfb5216ca230ecf.css" integrity="sha256-evXk8EjHVtWJbxWz981&#43;6JjqGzsQH8tAq/tSFsojDs8=" rel="preload stylesheet" as="style">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js" integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://iblog.zone/images/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://iblog.zone/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="https://iblog.zone/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="https://iblog.zone/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="https://iblog.zone/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel='stylesheet' href='//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.css'>

<meta property="og:title" content="Java基础加强01" />
<meta property="og:description" content="1.类加载器 1.1类加载器【理解】   作用
负责将.class文件（存储的物理文件）加载在到内存中
  1.2类加载的过程【理解】   类加载时机
 创建类的实例（对象） 调用类的类方法 访问类或者接口的类变量，或者为该类变量赋值 使用反射方式来强制创建某个类或接口对应的java.lang.Class对象 初始化某个类的子类 直接使用java.exe命令来运行某个主类    类加载过程
  加载
 通过包名 &#43; 类名，获取这个类，准备用流进行传输 在这个类加载到内存中 加载完毕创建一个class对象    链接
  验证
确保Class文件字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身安全
(文件中的信息是否符合虚拟机规范有没有安全隐患)
    准备
负责为类的类变量（被static修饰的变量）分配内存，并设置默认初始化值
(初始化静态变量)
    解析
将类的二进制数据流中的符号引用替换为直接引用
(本类中如果用到了其他类，此时就需要找到对应的类)
    初始化
根据程序员通过程序制定的主观计划去初始化类变量和其他资源
(静态变量赋值以及初始化其他资源)
    小结
 当一个类被使用的时候，才会加载到内存 类加载的过程: 加载、验证、准备、解析、初始化    1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://iblog.zone/archives/java%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%BC%BA01/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-24T15:31:20&#43;08:00" />
<meta property="article:modified_time" content="2022-04-24T15:31:20&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java基础加强01"/>
<meta name="twitter:description" content="1.类加载器 1.1类加载器【理解】   作用
负责将.class文件（存储的物理文件）加载在到内存中
  1.2类加载的过程【理解】   类加载时机
 创建类的实例（对象） 调用类的类方法 访问类或者接口的类变量，或者为该类变量赋值 使用反射方式来强制创建某个类或接口对应的java.lang.Class对象 初始化某个类的子类 直接使用java.exe命令来运行某个主类    类加载过程
  加载
 通过包名 &#43; 类名，获取这个类，准备用流进行传输 在这个类加载到内存中 加载完毕创建一个class对象    链接
  验证
确保Class文件字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身安全
(文件中的信息是否符合虚拟机规范有没有安全隐患)
    准备
负责为类的类变量（被static修饰的变量）分配内存，并设置默认初始化值
(初始化静态变量)
    解析
将类的二进制数据流中的符号引用替换为直接引用
(本类中如果用到了其他类，此时就需要找到对应的类)
    初始化
根据程序员通过程序制定的主观计划去初始化类变量和其他资源
(静态变量赋值以及初始化其他资源)
    小结
 当一个类被使用的时候，才会加载到内存 类加载的过程: 加载、验证、准备、解析、初始化    1."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://iblog.zone/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Java基础加强01",
      "item": "https://iblog.zone/archives/java%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%BC%BA01/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Java基础加强01",
  "name": "Java基础加强01",
  "description": "1.类加载器 1.1类加载器【理解】   作用\n负责将.class文件（存储的物理文件）加载在到内存中\n  1.2类加载的过程【理解】   类加载时机\n 创建类的实例（对象） 调用类的类方法 访问类或者接口的类变量，或者为该类变量赋值 使用反射方式来强制创建某个类或接口对应的java.lang.Class对象 初始化某个类的子类 直接使用java.exe命令来运行某个主类    类加载过程\n  加载\n 通过包名 + 类名，获取这个类，准备用流进行传输 在这个类加载到内存中 加载完毕创建一个class对象    链接\n  验证\n确保Class文件字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身安全\n(文件中的信息是否符合虚拟机规范有没有安全隐患)\n    准备\n负责为类的类变量（被static修饰的变量）分配内存，并设置默认初始化值\n(初始化静态变量)\n    解析\n将类的二进制数据流中的符号引用替换为直接引用\n(本类中如果用到了其他类，此时就需要找到对应的类)\n    初始化\n根据程序员通过程序制定的主观计划去初始化类变量和其他资源\n(静态变量赋值以及初始化其他资源)\n    小结\n 当一个类被使用的时候，才会加载到内存 类加载的过程: 加载、验证、准备、解析、初始化    1.",
  "keywords": [
    "基础加强"
  ],
  "articleBody": "1.类加载器 1.1类加载器【理解】   作用\n负责将.class文件（存储的物理文件）加载在到内存中\n  1.2类加载的过程【理解】   类加载时机\n 创建类的实例（对象） 调用类的类方法 访问类或者接口的类变量，或者为该类变量赋值 使用反射方式来强制创建某个类或接口对应的java.lang.Class对象 初始化某个类的子类 直接使用java.exe命令来运行某个主类    类加载过程\n  加载\n 通过包名 + 类名，获取这个类，准备用流进行传输 在这个类加载到内存中 加载完毕创建一个class对象    链接\n  验证\n确保Class文件字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身安全\n(文件中的信息是否符合虚拟机规范有没有安全隐患)\n    准备\n负责为类的类变量（被static修饰的变量）分配内存，并设置默认初始化值\n(初始化静态变量)\n    解析\n将类的二进制数据流中的符号引用替换为直接引用\n(本类中如果用到了其他类，此时就需要找到对应的类)\n    初始化\n根据程序员通过程序制定的主观计划去初始化类变量和其他资源\n(静态变量赋值以及初始化其他资源)\n    小结\n 当一个类被使用的时候，才会加载到内存 类加载的过程: 加载、验证、准备、解析、初始化    1.3类加载的分类【理解】   分类\n Bootstrap class loader：虚拟机的内置类加载器，通常表示为null ，并且没有父null Platform class loader：平台类加载器,负责加载JDK中一些特殊的模块 System class loader：系统类加载器,负责加载用户类路径上所指定的类库    类加载器的继承关系\n System的父加载器为Platform Platform的父加载器为Bootstrap    代码演示\npublic class ClassLoaderDemo1 {  public static void main(String[] args) {  //获取系统类加载器  ClassLoader systemClassLoader = ClassLoader.getSystemClassLoader();   //获取系统类加载器的父加载器 --- 平台类加载器  ClassLoader classLoader1 = systemClassLoader.getParent();   //获取平台类加载器的父加载器 --- 启动类加载器  ClassLoader classLoader2 = classLoader1.getParent();   System.out.println(\"系统类加载器\" + systemClassLoader);  System.out.println(\"平台类加载器\" + classLoader1);  System.out.println(\"启动类加载器\" + classLoader2);   } }   1.4双亲委派模型【理解】   介绍\n如果一个类加载器收到了类加载请求，它并不会自己先去加载，而是把这个请求委托给父类的加载器去执行，如果父类加载器还存在其父类加载器，则进一步向上委托，依次递归，请求最终将到达顶层的启动类加载器，如果父类加载器可以完成类加载任务，就成功返回，倘若父类加载器无法完成此加载任务，子加载器才会尝试自己去加载，这就是双亲委派模式\n  1.5ClassLoader 中的两个方法【应用】   方法介绍\n   方法名 说明     public static ClassLoader getSystemClassLoader() 获取系统类加载器   public InputStream getResourceAsStream(String name) 加载某一个资源文件      示例代码\npublic class ClassLoaderDemo2 {  public static void main(String[] args) throws IOException {  //static ClassLoader getSystemClassLoader() 获取系统类加载器  //InputStream getResourceAsStream(String name) 加载某一个资源文件   //获取系统类加载器  ClassLoader systemClassLoader = ClassLoader.getSystemClassLoader();   //利用加载器去加载一个指定的文件  //参数：文件的路径（放在src的根目录下，默认去那里加载）  //返回值：字节流。  InputStream is = systemClassLoader.getResourceAsStream(\"prop.properties\");   Properties prop = new Properties();  prop.load(is);   System.out.println(prop);   is.close();  } }   2.反射 2.1反射的概述【理解】   反射机制\n是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法； 对于任意一个对象，都能够调用它的任意属性和方法； 这种动态获取信息以及动态调用对象方法的功能称为Java语言的反射机制。\n  2.2获取Class类对象的三种方式【应用】   三种方式分类\n 类名.class属性 对象名.getClass()方法 Class.forName(全类名)方法    示例代码\npublic class Student {  private String name;  private int age;   public Student() {  }   public Student(String name, int age) {  this.name = name;  this.age = age;  }   public String getName() {  return name;  }   public void setName(String name) {  this.name = name;  }   public int getAge() {  return age;  }   public void setAge(int age) {  this.age = age;  }   public void study(){  System.out.println(\"学生在学习\");  }   @Override  public String toString() {  return \"Student{\" +  \"name='\" + name + '\\'' +  \", age=\" + age +  '}';  } } public class ReflectDemo1 {  public static void main(String[] args) throws ClassNotFoundException {  //1.Class类中的静态方法forName(\"全类名\")  //全类名:包名 + 类名  Class clazz = Class.forName(\"com.itheima.myreflect2.Student\");  System.out.println(clazz);   //2.通过class属性来获取  Class clazz2 = Student.class;  System.out.println(clazz2);   //3.利用对象的getClass方法来获取class对象  //getClass方法是定义在Object类中.  Student s = new Student();  Class clazz3 = s.getClass();  System.out.println(clazz3);   System.out.println(clazz == clazz2);  System.out.println(clazz2 == clazz3);  } }   2.3反射获取构造方法并使用【应用】 2.3.1Class类获取构造方法对象的方法   方法介绍\n   方法名 说明     Constructor[] getConstructors() 返回所有公共构造方法对象的数组   Constructor[] getDeclaredConstructors() 返回所有构造方法对象的数组   Constructor getConstructor(Class… parameterTypes) 返回单个公共构造方法对象   Constructor getDeclaredConstructor(Class… parameterTypes) 返回单个构造方法对象      示例代码\npublic class Student {  private String name;  private int age;   //私有的有参构造方法  private Student(String name) {  System.out.println(\"name的值为:\" + name);  System.out.println(\"private...Student...有参构造方法\");  }   //公共的无参构造方法  public Student() {  System.out.println(\"public...Student...无参构造方法\");  }   //公共的有参构造方法  public Student(String name, int age) {  System.out.println(\"name的值为:\" + name + \"age的值为:\" + age);  System.out.println(\"public...Student...有参构造方法\");  } } public class ReflectDemo1 {  public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException {  //method1();  //method2();  //method3();  //method4();  }   private static void method4() throws ClassNotFoundException, NoSuchMethodException {  // Constructor getDeclaredConstructor(Class... parameterTypes)： // 返回单个构造方法对象  //1.获取Class对象  Class clazz = Class.forName(\"com.itheima.myreflect3.Student\");  Constructor constructor = clazz.getDeclaredConstructor(String.class);  System.out.println(constructor);  }   private static void method3() throws ClassNotFoundException, NoSuchMethodException {  // Constructor getConstructor(Class... parameterTypes)： // 返回单个公共构造方法对象  //1.获取Class对象  Class clazz = Class.forName(\"com.itheima.myreflect3.Student\");  //小括号中,一定要跟构造方法的形参保持一致.  Constructor constructor1 = clazz.getConstructor();  System.out.println(constructor1);   Constructor constructor2 = clazz.getConstructor(String.class, int.class);  System.out.println(constructor2);   //因为Student类中,没有只有一个int的构造,所以这里会报错.  Constructor constructor3 = clazz.getConstructor(int.class);  System.out.println(constructor3);  }   private static void method2() throws ClassNotFoundException {  // Constructor[] getDeclaredConstructors()： // 返回所有构造方法对象的数组  //1.获取Class对象  Class clazz = Class.forName(\"com.itheima.myreflect3.Student\");   Constructor[] constructors = clazz.getDeclaredConstructors();  for (Constructor constructor : constructors) {  System.out.println(constructor);  }  }   private static void method1() throws ClassNotFoundException {  // Constructor[] getConstructors()： // 返回所有公共构造方法对象的数组  //1.获取Class对象  Class clazz = Class.forName(\"com.itheima.myreflect3.Student\");  Constructor[] constructors = clazz.getConstructors();  for (Constructor constructor : constructors) {  System.out.println(constructor);  }  } }   2.3.2Constructor类用于创建对象的方法   方法介绍\n   方法名 说明     T newInstance(Object…initargs) 根据指定的构造方法创建对象   setAccessible(boolean flag) 设置为true,表示取消访问检查      示例代码\n// Student类同上一个示例,这里就不在重复提供了 public class ReflectDemo2 {  public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {  //T newInstance(Object... initargs)：根据指定的构造方法创建对象  //method1();  //method2();  //method3();  //method4();   }   private static void method4() throws ClassNotFoundException, NoSuchMethodException, InstantiationException, IllegalAccessException, InvocationTargetException {  //获取一个私有的构造方法并创建对象  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect3.Student\");   //2.获取一个私有化的构造方法.  Constructor constructor = clazz.getDeclaredConstructor(String.class);   //被private修饰的成员,不能直接使用的  //如果用反射强行获取并使用,需要临时取消访问检查  constructor.setAccessible(true);   //3.直接创建对象  Student student = (Student) constructor.newInstance(\"zhangsan\");   System.out.println(student);  }   private static void method3() throws ClassNotFoundException, InstantiationException, IllegalAccessException {  //简写格式  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect3.Student\");   //2.在Class类中,有一个newInstance方法,可以利用空参直接创建一个对象  Student student = (Student) clazz.newInstance();//这个方法现在已经过时了,了解一下   System.out.println(student);  }   private static void method2() throws ClassNotFoundException, NoSuchMethodException, InstantiationException, IllegalAccessException, InvocationTargetException {  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect3.Student\");   //2.获取构造方法对象  Constructor constructor = clazz.getConstructor();   //3.利用空参来创建Student的对象  Student student = (Student) constructor.newInstance();   System.out.println(student);  }   private static void method1() throws ClassNotFoundException, NoSuchMethodException, InstantiationException, IllegalAccessException, InvocationTargetException {  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect3.Student\");   //2.获取构造方法对象  Constructor constructor = clazz.getConstructor(String.class, int.class);   //3.利用newInstance创建Student的对象  Student student = (Student) constructor.newInstance(\"zhangsan\", 23);   System.out.println(student);  } }   2.3.3小结   获取class对象\n三种方式: Class.forName(“全类名”), 类名.class, 对象名.getClass()\n  获取里面的构造方法对象\ngetConstructor (Class… parameterTypes) getDeclaredConstructor (Class… parameterTypes)\n  如果是public的，直接创建对象\nnewInstance(Object… initargs)\n  如果是非public的，需要临时取消检查，然后再创建对象\nsetAccessible(boolean) 暴力反射\n  2.4反射获取成员变量并使用【应用】 2.4.1Class类获取成员变量对象的方法   方法分类\n   方法名 说明     Field[] getFields() 返回所有公共成员变量对象的数组   Field[] getDeclaredFields() 返回所有成员变量对象的数组   Field getField(String name) 返回单个公共成员变量对象   Field getDeclaredField(String name) 返回单个成员变量对象      示例代码\npublic class Student {   public String name;   public int age;   public String gender;   private int money = 300;   @Override  public String toString() {  return \"Student{\" +  \"name='\" + name + '\\'' +  \", age=\" + age +  \", gender='\" + gender + '\\'' +  \", money=\" + money +  '}';  } } public class ReflectDemo1 {  public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException {  // method1();  //method2();  //method3();  //method4();   }   private static void method4() throws ClassNotFoundException, NoSuchFieldException {  // Field getDeclaredField(String name)：返回单个成员变量对象  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect4.Student\");   //2.获取money成员变量  Field field = clazz.getDeclaredField(\"money\");   //3.打印一下  System.out.println(field);  }   private static void method3() throws ClassNotFoundException, NoSuchFieldException {  // Field getField(String name)：返回单个公共成员变量对象  //想要获取的成员变量必须是真实存在的  //且必须是public修饰的.  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect4.Student\");   //2.获取name这个成员变量  //Field field = clazz.getField(\"name\");  //Field field = clazz.getField(\"name1\");  Field field = clazz.getField(\"money\");   //3.打印一下  System.out.println(field);  }   private static void method2() throws ClassNotFoundException {  // Field[] getDeclaredFields()：返回所有成员变量对象的数组  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect4.Student\");   //2.获取所有的Field对象  Field[] fields = clazz.getDeclaredFields();   //3.遍历  for (Field field : fields) {  System.out.println(field);  }  }   private static void method1() throws ClassNotFoundException {  // Field[] getFields()：返回所有公共成员变量对象的数组   //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect4.Student\");   //2.获取Field对象.  Field[] fields = clazz.getFields();   //3.遍历  for (Field field : fields) {  System.out.println(field);  }  } }   2.4.2Field类用于给成员变量赋值的方法   方法介绍\n   方法名 说明     void set(Object obj, Object value) 赋值   Object get(Object obj) 获取值      示例代码\n// Student类同上一个示例,这里就不在重复提供了 public class ReflectDemo2 {  public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException, IllegalAccessException, InstantiationException { // Object get(Object obj) 返回由该 Field表示的字段在指定对象上的值。  //method1();  //method2();   }   private static void method2() throws ClassNotFoundException, NoSuchFieldException, InstantiationException, IllegalAccessException {  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect4.Student\");   //2.获取成员变量Field的对象  Field field = clazz.getDeclaredField(\"money\");   //3.取消一下访问检查  field.setAccessible(true);   //4.调用get方法来获取值  //4.1创建一个对象  Student student = (Student) clazz.newInstance();  //4.2获取指定对象的money的值  Object o = field.get(student);   //5.打印一下  System.out.println(o);  }   private static void method1() throws ClassNotFoundException, NoSuchFieldException, InstantiationException, IllegalAccessException {  // void set(Object obj, Object value)：给obj对象的成员变量赋值为value  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect4.Student\");   //2.获取name这个Field对象  Field field = clazz.getField(\"name\");   //3.利用set方法进行赋值.  //3.1先创建一个Student对象  Student student = (Student) clazz.newInstance();  //3.2有了对象才可以给指定对象进行赋值  field.set(student,\"zhangsan\");   System.out.println(student);  } }   2.5反射获取成员方法并使用【应用】 2.5.1Class类获取成员方法对象的方法   方法分类\n   方法名 说明     Method[] getMethods() 返回所有公共成员方法对象的数组，包括继承的   Method[] getDeclaredMethods() 返回所有成员方法对象的数组，不包括继承的   Method getMethod(String name, Class… parameterTypes) 返回单个公共成员方法对象   Method getDeclaredMethod(String name, Class… parameterTypes) 返回单个成员方法对象      示例代码\npublic class Student {   //私有的，无参无返回值  private void show() {  System.out.println(\"私有的show方法，无参无返回值\");  }   //公共的，无参无返回值  public void function1() {  System.out.println(\"function1方法，无参无返回值\");  }   //公共的，有参无返回值  public void function2(String name) {  System.out.println(\"function2方法，有参无返回值,参数为\" + name);  }   //公共的，无参有返回值  public String function3() {  System.out.println(\"function3方法，无参有返回值\");  return \"aaa\";  }   //公共的，有参有返回值  public String function4(String name) {  System.out.println(\"function4方法，有参有返回值,参数为\" + name);  return \"aaa\";  } } public class ReflectDemo1 {  public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException {  //method1();  //method2();  //method3();  //method4();  //method5();  }   private static void method5() throws ClassNotFoundException, NoSuchMethodException {  // Method getDeclaredMethod(String name, Class... parameterTypes)： // 返回单个成员方法对象  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect5.Student\");  //2.获取一个成员方法show  Method method = clazz.getDeclaredMethod(\"show\");  //3.打印一下  System.out.println(method);  }   private static void method4() throws ClassNotFoundException, NoSuchMethodException {  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect5.Student\");  //2.获取一个有形参的方法function2  Method method = clazz.getMethod(\"function2\", String.class);  //3.打印一下  System.out.println(method);  }   private static void method3() throws ClassNotFoundException, NoSuchMethodException {  // Method getMethod(String name, Class... parameterTypes) ： // 返回单个公共成员方法对象  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect5.Student\");  //2.获取成员方法function1  Method method1 = clazz.getMethod(\"function1\");  //3.打印一下  System.out.println(method1);  }   private static void method2() throws ClassNotFoundException {  // Method[] getDeclaredMethods()： // 返回所有成员方法对象的数组，不包括继承的  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect5.Student\");   //2.获取Method对象  Method[] methods = clazz.getDeclaredMethods();  //3.遍历一下数组  for (Method method : methods) {  System.out.println(method);  }  }   private static void method1() throws ClassNotFoundException {  // Method[] getMethods()：返回所有公共成员方法对象的数组，包括继承的  //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect5.Student\");  //2.获取成员方法对象  Method[] methods = clazz.getMethods();  //3.遍历  for (Method method : methods) {  System.out.println(method);  }  } }   2.5.2Method类用于执行方法的方法   方法介绍\n   方法名 说明     Object invoke(Object obj, Object… args) 运行方法    参数一: 用obj对象调用该方法\n参数二: 调用方法的传递的参数(如果没有就不写)\n返回值: 方法的返回值(如果没有就不写)\n  示例代码\npublic class ReflectDemo2 {  public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InstantiationException, InvocationTargetException { // Object invoke(Object obj, Object... args)：运行方法 // 参数一：用obj对象调用该方法 // 参数二：调用方法的传递的参数（如果没有就不写） // 返回值：方法的返回值（如果没有就不写）   //1.获取class对象  Class clazz = Class.forName(\"com.itheima.myreflect5.Student\");  //2.获取里面的Method对象 function4  Method method = clazz.getMethod(\"function4\", String.class);  //3.运行function4方法就可以了  //3.1创建一个Student对象,当做方法的调用者  Student student = (Student) clazz.newInstance();  //3.2运行方法  Object result = method.invoke(student, \"zhangsan\");  //4.打印一下返回值  System.out.println(result);  } }   3.http服务器改写 3.1静态资源和动态资源【理解】   静态资源\n在服务器提前准备好的文件。(图片，文本)\n  动态资源\n在图示的案例中，当用户点击了浏览器上的按钮。 本质上访问的就是服务端的某一个类中的某一个方法。 在方法中，可以写一些判断代码和逻辑代码，让响应的内容，有可能不一样了。 那么，服务端所对应的这个类我们常常将其称之为“动态资源”\n  3.2准备工作【理解】   修改四个地方\n HttpResponse - 常量WEB_APP_PATH的值与当前模块一致 HttpServer - main方法中端口改成80 HttpResponse - 添加一个write方法，添加一个带参数的构造方法 HttpResponse - 添加一个contentType成员变量，生成对应的set/get方法    示例代码\n// 1.HttpResponse - 常量WEB_APP_PATH的值与当前模块一致 public class HttpResponse {  ...  public static final String WEB_APP_PATH = \"http-dynamic-server\\\\webapp\";  ... }  // 2.HttpServer - main方法中端口改成80 public class HttpServer {  public static void main(String[] args) throws IOException {  ...  //2.让这个通道绑定一个端口  serverSocketChannel.bind(new InetSocketAddress(80));  ...  } }  // 3.HttpResponse - 添加一个write方法，添加一个带参数的构造方法 public class HttpResponse {  ...  // 已经提供了selectionKey，所以之前的方法接收这个参数的可以去掉了，直接使用这个即可  // HttpRequest也按照此方式进行优化，定义成员变量，在构造方法中赋值，其他方法直接使用即可  private SelectionKey selectionKey;   public HttpResponse(SelectionKey selectionKey) {  this.selectionKey = selectionKey;  }   //给浏览器响应数据的方法 ---- 浏览器在请求动态资源时,响应数据的方法.  //content:响应的内容  public void write(String content){  }  ... }  public class HttpServer {  public static void main(String[] args) throws IOException {  ...  //响应数据 //修改后的构造方法中要传入参数  HttpResponse httpResponse = new HttpResponse(selectionKey);  ...  } }  // 4.HttpResponse - 添加一个contentType成员变量，生成对应的set/get方法 public class HttpResponse {  ...  private String contentType;//MIME类型   public String getContentType() {  return contentType;  }  public void setContentTpye(String contentType) {  this.contentType = contentType;  //添加到map集合中  hm.put(\"Content-Type\",contentType);  }  ... }   3.3浏览器请求动态资源【理解】   两个小问题\n  服务器如何判断浏览器请求的是静态资源还是动态资源?\n我们可以规定：如果浏览器地址栏中的uri是以”/servlet”开始的，那么就表示请求动态资源\n  在一个项目中有很多类，很多方法。那么请求过来之后，执行哪个方法呢?\n写一个UserServlet类，在类中写service方法 我们可以规定：如果请求动态资源，就创建这个类对象，并调用service方法，表示服务器处理了当前请求\n    实现步骤\n  解析http请求\n  处理浏览器请求\n定义一个UserServlet 类，类中定义service方法，处理浏览器请求动态资源 解析完http请求之后，再判断uri是否以/servlet开头\n  响应\n    示例代码\npublic class UserServlet{  public void service(){  //模拟业务处理 ---- 就可以对这个手机号进行判断验证  System.out.println(\"UserServlet处理了用户的请求...\");  } } public class HttpServer {  public static void main(String[] args) throws IOException {  ...  //响应数据  HttpResponse httpResponse = new HttpResponse(selectionKey);  httpResponse.setHttpRequest(httpRequest);   if(httpRequest.getRequestURI().startsWith(\"/servlet\")){  //本次请求动态资源  //处理  UserServlet userServlet = new UserServlet();  userServlet.service();  //响应  httpResponse.setContentTpye(\"text/html;charset=UTF-8\");  httpResponse.write(\"ok,UserServlet处理了本次请求....\");  }else{  //本次请求静态资源  httpResponse.sendStaticResource();  }  ...  } }  public class HttpResponse {  ... \t//给浏览器响应数据的方法 ---- 浏览器在请求动态资源时,响应数据的方法.  //content:响应的内容  public void write(String content){  //准备响应行数据  this.version = \"HTTP/1.1\";  this.status = \"200\";  this.desc = \"ok\";   //把响应行拼接在一起  String responseLine = this.version + \" \" + this.status + \" \" + this.desc + \"\\r\\n\";   //准备响应头  StringBuilder sb = new StringBuilder();  SetMap.EntryString, String entries = hm.entrySet();  for (Map.EntryString, String entry : entries) {  //entry依次表示每一个键值对对象  //键 --- 响应头的名称  //值 --- 响应头的值  sb.append(entry.getKey()).append(\": \").append(entry.getValue()).append(\"\\r\\n\");  }   //处理响应空行  String emptyLine = \"\\r\\n\";   //拼接响应行,响应头,响应空行  String result = responseLine + sb.toString() + emptyLine;   try {  //给浏览器响应 响应行,响应头,响应空行  ByteBuffer byteBuffer1 = ByteBuffer.wrap(result.getBytes());  SocketChannel channel = (SocketChannel) selectionKey.channel();  channel.write(byteBuffer1);   //给浏览器响应 响应体  ByteBuffer byteBuffer2 = ByteBuffer.wrap(content.getBytes());  channel.write(byteBuffer2);   //释放资源  channel.close();   } catch (IOException e) {  System.out.println(\"响应数据失败....\");  e.printStackTrace();  }   }  ... }   3.4main方法和Servlet优化【理解】   main方法优化\n  需求\n将请求动态资源的代码抽取到一个单独的类单独的方法中，简化main中的代码\n  代码实现\npublic class DynamicResourceProcess {   //执行指定动态资源的service方法  //参数一  //由于后期可能根据用户请求的uri做出相应的处理.  //参数二  //要给用户响应数据,那么就需要使用到httpResponse.  public void process(HttpRequest httpRequest,HttpResponse httpResponse) {  // 创建UserServlet对象,调用service方法,进行处理  UserServlet userServlet = new UserServlet();  userServlet.service();   //给浏览器响应  httpResponse.setContentTpye(\"text/html;charset=UTF-8\");  httpResponse.write(\"ok,UserServlet处理了本次请求....\");  } }  public class HttpServer {  public static void main(String[] args) throws IOException {  ...  //响应数据  HttpResponse httpResponse = new HttpResponse(selectionKey);  httpResponse.setHttpRequest(httpRequest);   if(httpRequest.getRequestURI().startsWith(\"/servlet\")){  //本次请求动态资源  DynamicResourceProcess drp = new DynamicResourceProcess();  drp.process(httpRequest,httpResponse);  }else{  //本次请求静态资源  httpResponse.sendStaticResource();  }  ...  } }     Servlet优化\n  需求\n将给浏览器响应的代码写到Servlet中\n  代码实现\npublic class UserServlet implements HttpServlet{   //处理浏览器请求的方法  //参数一  //由于后期可能根据用户请求的uri做出相应的处理.  //参数二  //要给用户响应数据,那么就需要使用到httpResponse.  public void service(HttpRequest httpRequest, HttpResponse httpResponse){  //模拟业务处理 ---- 就可以对这个手机号进行判断验证  System.out.println(\"UserServlet处理了用户的请求...\");  //给浏览器响应  httpResponse.setContentTpye(\"text/html;charset=UTF-8\");  httpResponse.write(\"ok,UserServlet处理了本次请求....\");  } }  public class DynamicResourceProcess {   //执行指定动态资源的service方法  //参数一  //由于后期可能根据用户请求的uri做出相应的处理.  //参数二  //要给用户响应数据,那么就需要使用到httpResponse.  public void process(HttpRequest httpRequest,HttpResponse httpResponse) {  // 创建UserServlet对象,调用service方法,进行处理  UserServlet userServlet = new UserServlet();  userServlet.service(httpRequest,httpResponse);  } }     3.5多个动态资源【理解】   多个动态资源\n针对每一个业务操作，我们都会去定义一个对应的Servlet来完成。 就会在服务端产生很多个Servlet\n  实现步骤\n 定义一个接口HttpServlet，接口中定义service方法。 针对于每一种业务，都定义一个servlet类与之对应，该类实现HttpServlet接口 获取请求的uri，进行判断，调用不同的servlet类中的service方法    代码实现\n// 1.定义一个接口HttpServlet，接口中定义service方法 public interface HttpServlet {   //定义业务处理的方法  public abstract void service(HttpRequest httpRequest, HttpResponse httpResponse); }  // 2.针对于每一种业务，都定义一个servlet类与之对应，该类实现HttpServlet接口 public class UserServlet implements HttpServlet{  //处理浏览器请求的方法  //参数一  //由于后期可能根据用户请求的uri做出相应的处理.  //参数二  //要给用户响应数据,那么就需要使用到httpResponse.  public void service(HttpRequest httpRequest, HttpResponse httpResponse){  //模拟业务处理 ---- 就可以对这个手机号进行判断验证  System.out.println(\"UserServlet处理了用户的请求...\");  //给浏览器响应  httpResponse.setContentTpye(\"text/html;charset=UTF-8\");  httpResponse.write(\"ok,UserServlet处理了本次请求....\");  } }  public class LoginServlet implements HttpServlet{  @Override  public void service(HttpRequest httpRequest, HttpResponse httpResponse) {  //处理  System.out.println(\"LoginServlet处理了登录请求\");  //响应  httpResponse.setContentTpye(\"text/html;charset=UTF-8\");  httpResponse.write(\"登录成功\");  } }  public class RegisterServlet implements HttpServlet{  @Override  public void service(HttpRequest httpRequest, HttpResponse httpResponse) {  //处理  System.out.println(\"RegisterServlet处理了注册请求\");  //响应  httpResponse.setContentTpye(\"text/html;charset=UTF-8\");  httpResponse.write(\"注册成功\");  } }  public class SearchServlet implements HttpServlet{  @Override  public void service(HttpRequest httpRequest, HttpResponse httpResponse) {  //处理  System.out.println(\"SearchServlet处理了搜索商品请求\");  //响应  httpResponse.setContentTpye(\"text/html;charset=UTF-8\");  httpResponse.write(\"响应了一些商品信息\");  } }  // 3.获取请求的uri，进行判断，调用不同的servlet类中的service方法 public class DynamicResourceProcess {   public void process(HttpRequest httpRequest,HttpResponse httpResponse){  //获取请求的uri  String requestURI = httpRequest.getRequestURI();   //根据请求的uri进行判断  if(\"/servlet/loginservlet\".equals(requestURI)){  //登录请求  LoginServlet loginServlet = new LoginServlet();  loginServlet.service(httpRequest,httpResponse);  }else if(\"/servlet/registerservlet\".equals(requestURI)){  //注册请求  RegisterServlet registerServlet = new RegisterServlet();  registerServlet.service(httpRequest,httpResponse);  }else if(\"/servlet/searchservlet\".equals(requestURI)){  //搜索商品请求  SearchServlet searchServlet = new SearchServlet();  searchServlet.service(httpRequest,httpResponse);  }else{  //表示默认处理方法  //创建UserServlet对象,调用service方法,进行处理  UserServlet userServlet = new UserServlet();  userServlet.service(httpRequest,httpResponse);  }  } }   3.6通过反射和配置文件优化【理解】   优化步骤\n  把Servlet信息写到properties配置文件中\n格式为：servlet-info=/servlet/UserServlet，全类名；/servlet/loginServlet，全类名\n  定义一个接口ServletConcurrentHashMap，接口中定义ConcurrentHashMap，该集合存储所有的servlet信息\n  定义一个接口ParseServletConfig，该接口中定义一个方法（parse）\n  定义ParseServletConfig的实现类，解析配置文件，并把配置文件中Servlet信息存到map集合中\n  在main方法的第一行，开启一条线程执行解析配置文件的代码\n  修改处理DynamicResourceProcess中的process方法\n    代码实现\n// 1.把Servlet信息写到properties配置文件中 // 在webapp\\config\\servlet-info.properties文件中，写入如下内容 servlet-info=/servlet/loginservlet,com.itheima.myservlet.LoginServlet;/servlet/registerservlet,com.itheima.myservlet.RegisterServlet;/servlet/searchservlet,com.itheima.myservlet.SearchServlet;/servlet/lostpasswordservlet,com.itheima.myservlet.LostPasswordServlet  // 2.定义一个接口ServletConcurrentHashMap，接口中定义ConcurrentHashMap，该集合存储所有的servlet信息 public interface ServletConcurrentHashMap {  //存储请求路径和对应的servlet的map集合  //键: 请求的uri  //值: 对应的Servlet对象  public static final ConcurrentHashMapString, HttpServlet map = new ConcurrentHashMap(); }  // 3.定义一个接口ParseServletConfig，该接口中定义一个方法（parse） public interface ParseServletConfig {  //解析数据的方法  public abstract void parse(); }  // 4.定义ParseServletConfig的实现类，解析配置文件，并把配置文件中Servlet信息存到map集合中 public class PropertiesParseServletConfig implements ParseServletConfig {  @Override  public void parse() {   try {  //1.读取配置文件中的数据  Properties properties = new Properties();  FileReader fr = new FileReader(\"http-dynamic-server/webapp/config/servlet-info.properties\");  properties.load(fr);  fr.close();   //2.获取集合中servlet-info的属性值  String properValue = (String) properties.get(\"servlet-info\");  // uri,全类名;uri,全类名   //3.解析  String[] split = properValue.split(\";\");  for (String servletInfo : split) {  String[] servletInfoArr = servletInfo.split(\",\");  String uri = servletInfoArr[0];  String servletName = servletInfoArr[1];   //我们需要通过servletName(全类名)来创建他的对象  Class clazz = Class.forName(servletName);  HttpServlet httpServlet = (HttpServlet) clazz.newInstance();  //4.将uri和httpServlet添加到map集合中  ServletConcurrentHashMap.map.put(uri,httpServlet);  }  } catch (Exception e) {  System.out.println(\"解析数据异常.....\");  e.printStackTrace();  }  } }  public class LoaderResourceRunnable implements Runnable {  @Override  public void run() {  //执行parse方法  ParseServletConfig parseServletConfig = new PropertiesParseServletConfig();  parseServletConfig.parse();   } }  // 5.在main方法的第一行，开启一条线程执行解析配置文件的代码 public class HttpServer {  public static void main(String[] args) throws IOException {  //开启一条线程去解析配置文件  new Thread(new LoaderResourceRunnable()).start();  ...  } }  // 6.修改处理DynamicResourceProcess中的process方法 public class DynamicResourceProcess {   public void process(HttpRequest httpRequest,HttpResponse httpResponse){  //获取请求的uri  String requestURI = httpRequest.getRequestURI();  //根据请求的uri到map集合中直接找到对应的servlet的对象  HttpServlet httpServlet = ServletConcurrentHashMap.map.get(requestURI);  //调用service方法对请求进行处理并响应  httpServlet.service(httpRequest,httpResponse);  } }   3.7Servlet忘记实现HttpServlet接口处理【理解】   出现情况\n在写Servlet时，忘记了实现HttpServlet接口\n  导致结果\n在反射创建对象后，强转成HttpServlet时，会报类型转换异常\n  解决方案\n在反射创建对象后，强转成HttpServlet前，进行判断\n如果有实现HttpServlet接口，就进行强转\n否则抛出一个异常\n  代码实现\npublic class PropertiesParseServletConfig implements ParseServletConfig {  @Override  public void parse() {   try {  //1.读取配置文件中的数据  Properties properties = new Properties();  FileReader fr = new FileReader(\"http-dynamic-server/webapp/config/servlet-info.properties\");  properties.load(fr);  fr.close();   //2.获取集合中servlet-info的属性值  String properValue = (String) properties.get(\"servlet-info\");  // uri,全类名;uri,全类名   //3.解析  String[] split = properValue.split(\";\");  for (String servletInfo : split) {  String[] servletInfoArr = servletInfo.split(\",\");  String uri = servletInfoArr[0];  String servletName = servletInfoArr[1];   //我们需要通过servletName(全类名)来创建他的对象  Class clazz = Class.forName(servletName);   //获取该类所实现的所有的接口信息,得到的是一个数组  Class[] interfaces = clazz.getInterfaces();   //定义一个boolean类型的变量  boolean flag = false;  //遍历数组  for (Class clazzInfo : interfaces) {  //判断当前所遍历的接口的字节码对象是否和HttpServlet的字节码文件对象相同  if(clazzInfo == HttpServlet.class){   //如果相同,就需要更改flag值.结束循环  flag = true;  break;  }  }   if(flag){  //true就表示当前的类已经实现了HttpServlet接口  HttpServlet httpServlet = (HttpServlet) clazz.newInstance();  //4.将uri和httpServlet添加到map集合中  ServletConcurrentHashMap.map.put(uri,httpServlet);  }else{  //false就表示当前的类还没有实现HttpServlet接口  throw new NotImplementsHttpServletException(clazz.getName() + \"Not Implements HttpServlet\");  }  }  } catch (NotImplementsHttpServletException e) {  e.printStackTrace();  }catch (Exception e) {  System.out.println(\"解析数据异常.....\");  e.printStackTrace();  }  } }   3.8响应404【理解】   出现情况\n客户端浏览器请求了一个服务器中不存在的动态资源\n  导致结果\n服务器中代码出现异常，程序停止\n  解决方案\n如果请求的动态资源不存在，服务器根据请求的uri找到对应的Servlet时为null，继续调用方法会出现异常\n增加一个非空的判断，如果不为null，则继续处理请求，调用方法\n如果为null，则响应404\n  代码实现\npublic class DynamicResourceProcess {  //执行指定动态资源的service方法  //参数一  //由于后期可能根据用户请求的uri做出相应的处理.  //参数二  //要给用户响应数据,那么就需要使用到httpResponse.  public void process(HttpRequest httpRequest,HttpResponse httpResponse){  //获取请求的uri  String requestURI = httpRequest.getRequestURI();  //根据请求的uri到map集合中直接找到对应的servlet的对象  HttpServlet httpServlet = ServletConcurrentHashMap.map.get(requestURI);  if(httpServlet != null){  //调用service方法对请求进行处理并响应  httpServlet.service(httpRequest,httpResponse);  }else{  //浏览器请求的动态资源不存在  //响应404  response404(httpResponse);  }  }  //浏览器请求动态资源不存在,响应404的方法  private void response404(HttpResponse httpResponse) {  try {  //准备响应行  String responseLine = \"HTTP/1.1 404 NOT FOUND\\r\\n\";  //准备响应头  String responseHeader = \"Content-Type: text/html;charset=UTF-8\\r\\n\";  //准备响应空行  String emptyLine = \"\\r\\n\";  //拼接在一起  String result = responseLine + responseHeader + emptyLine;   //把响应行,响应头,响应空行去响应给浏览器  SelectionKey selectionKey = httpResponse.getSelectionKey();  SocketChannel channel = (SocketChannel) selectionKey.channel();   ByteBuffer byteBuffer1 = ByteBuffer.wrap(result.getBytes());  channel.write(byteBuffer1);   //给浏览器 响应 响应体内容  ByteBuffer byteBuffer2 = ByteBuffer.wrap(\"404 NOT FOUND....\".getBytes());  channel.write(byteBuffer2);   //释放资源  channel.close();  } catch (IOException e) {  e.printStackTrace();  }  } }   ",
  "wordCount" : "2388",
  "inLanguage": "zh",
  "datePublished": "2022-04-24T15:31:20+08:00",
  "dateModified": "2022-04-24T15:31:20+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://iblog.zone/archives/java%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%BC%BA01/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "ylw's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://iblog.zone/images/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://iblog.zone" accesskey="h" title="ylw&#39;s blog (Alt + H)">ylw&#39;s blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://iblog.zone/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://iblog.zone/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://iblog.zone/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://iblog.zone/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://iblog.zone/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://iblog.zone">主页</a>&nbsp;»&nbsp;<a href="https://iblog.zone/posts/">Posts</a></div>
    <h1 class="post-title">
      Java基础加强01
    </h1>
    <div class="post-meta"><span title='2022-04-24 15:31:20 +0800 CST'>2022-04-24</span>&nbsp;·&nbsp;12 分钟

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#1%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8" aria-label="1.类加载器">1.类加载器</a><ul>
                            
                    <li>
                        <a href="#11%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%90%86%e8%a7%a3" aria-label="1.1类加载器【理解】">1.1类加载器【理解】</a></li>
                    <li>
                        <a href="#12%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%9a%84%e8%bf%87%e7%a8%8b%e7%90%86%e8%a7%a3" aria-label="1.2类加载的过程【理解】">1.2类加载的过程【理解】</a></li>
                    <li>
                        <a href="#13%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%9a%84%e5%88%86%e7%b1%bb%e7%90%86%e8%a7%a3" aria-label="1.3类加载的分类【理解】">1.3类加载的分类【理解】</a></li>
                    <li>
                        <a href="#14%e5%8f%8c%e4%ba%b2%e5%a7%94%e6%b4%be%e6%a8%a1%e5%9e%8b%e7%90%86%e8%a7%a3" aria-label="1.4双亲委派模型【理解】">1.4双亲委派模型【理解】</a></li>
                    <li>
                        <a href="#15classloader-%e4%b8%ad%e7%9a%84%e4%b8%a4%e4%b8%aa%e6%96%b9%e6%b3%95%e5%ba%94%e7%94%a8" aria-label="1.5ClassLoader 中的两个方法【应用】">1.5ClassLoader 中的两个方法【应用】</a></li></ul>
                    </li>
                    <li>
                        <a href="#2%e5%8f%8d%e5%b0%84" aria-label="2.反射">2.反射</a><ul>
                            
                    <li>
                        <a href="#21%e5%8f%8d%e5%b0%84%e7%9a%84%e6%a6%82%e8%bf%b0%e7%90%86%e8%a7%a3" aria-label="2.1反射的概述【理解】">2.1反射的概述【理解】</a></li>
                    <li>
                        <a href="#22%e8%8e%b7%e5%8f%96class%e7%b1%bb%e5%af%b9%e8%b1%a1%e7%9a%84%e4%b8%89%e7%a7%8d%e6%96%b9%e5%bc%8f%e5%ba%94%e7%94%a8" aria-label="2.2获取Class类对象的三种方式【应用】">2.2获取Class类对象的三种方式【应用】</a></li>
                    <li>
                        <a href="#23%e5%8f%8d%e5%b0%84%e8%8e%b7%e5%8f%96%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%e5%b9%b6%e4%bd%bf%e7%94%a8%e5%ba%94%e7%94%a8" aria-label="2.3反射获取构造方法并使用【应用】">2.3反射获取构造方法并使用【应用】</a><ul>
                            
                    <li>
                        <a href="#231class%e7%b1%bb%e8%8e%b7%e5%8f%96%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%e5%af%b9%e8%b1%a1%e7%9a%84%e6%96%b9%e6%b3%95" aria-label="2.3.1Class类获取构造方法对象的方法">2.3.1Class类获取构造方法对象的方法</a></li>
                    <li>
                        <a href="#232constructor%e7%b1%bb%e7%94%a8%e4%ba%8e%e5%88%9b%e5%bb%ba%e5%af%b9%e8%b1%a1%e7%9a%84%e6%96%b9%e6%b3%95" aria-label="2.3.2Constructor类用于创建对象的方法">2.3.2Constructor类用于创建对象的方法</a></li>
                    <li>
                        <a href="#233%e5%b0%8f%e7%bb%93" aria-label="2.3.3小结">2.3.3小结</a></li></ul>
                    </li>
                    <li>
                        <a href="#24%e5%8f%8d%e5%b0%84%e8%8e%b7%e5%8f%96%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f%e5%b9%b6%e4%bd%bf%e7%94%a8%e5%ba%94%e7%94%a8" aria-label="2.4反射获取成员变量并使用【应用】">2.4反射获取成员变量并使用【应用】</a><ul>
                            
                    <li>
                        <a href="#241class%e7%b1%bb%e8%8e%b7%e5%8f%96%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f%e5%af%b9%e8%b1%a1%e7%9a%84%e6%96%b9%e6%b3%95" aria-label="2.4.1Class类获取成员变量对象的方法">2.4.1Class类获取成员变量对象的方法</a></li>
                    <li>
                        <a href="#242field%e7%b1%bb%e7%94%a8%e4%ba%8e%e7%bb%99%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f%e8%b5%8b%e5%80%bc%e7%9a%84%e6%96%b9%e6%b3%95" aria-label="2.4.2Field类用于给成员变量赋值的方法">2.4.2Field类用于给成员变量赋值的方法</a></li></ul>
                    </li>
                    <li>
                        <a href="#25%e5%8f%8d%e5%b0%84%e8%8e%b7%e5%8f%96%e6%88%90%e5%91%98%e6%96%b9%e6%b3%95%e5%b9%b6%e4%bd%bf%e7%94%a8%e5%ba%94%e7%94%a8" aria-label="2.5反射获取成员方法并使用【应用】">2.5反射获取成员方法并使用【应用】</a><ul>
                            
                    <li>
                        <a href="#251class%e7%b1%bb%e8%8e%b7%e5%8f%96%e6%88%90%e5%91%98%e6%96%b9%e6%b3%95%e5%af%b9%e8%b1%a1%e7%9a%84%e6%96%b9%e6%b3%95" aria-label="2.5.1Class类获取成员方法对象的方法">2.5.1Class类获取成员方法对象的方法</a></li>
                    <li>
                        <a href="#252method%e7%b1%bb%e7%94%a8%e4%ba%8e%e6%89%a7%e8%a1%8c%e6%96%b9%e6%b3%95%e7%9a%84%e6%96%b9%e6%b3%95" aria-label="2.5.2Method类用于执行方法的方法">2.5.2Method类用于执行方法的方法</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#3http%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%94%b9%e5%86%99" aria-label="3.http服务器改写">3.http服务器改写</a><ul>
                            
                    <li>
                        <a href="#31%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e5%92%8c%e5%8a%a8%e6%80%81%e8%b5%84%e6%ba%90%e7%90%86%e8%a7%a3" aria-label="3.1静态资源和动态资源【理解】">3.1静态资源和动态资源【理解】</a></li>
                    <li>
                        <a href="#32%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c%e7%90%86%e8%a7%a3" aria-label="3.2准备工作【理解】">3.2准备工作【理解】</a></li>
                    <li>
                        <a href="#33%e6%b5%8f%e8%a7%88%e5%99%a8%e8%af%b7%e6%b1%82%e5%8a%a8%e6%80%81%e8%b5%84%e6%ba%90%e7%90%86%e8%a7%a3" aria-label="3.3浏览器请求动态资源【理解】">3.3浏览器请求动态资源【理解】</a></li>
                    <li>
                        <a href="#34main%e6%96%b9%e6%b3%95%e5%92%8cservlet%e4%bc%98%e5%8c%96%e7%90%86%e8%a7%a3" aria-label="3.4main方法和Servlet优化【理解】">3.4main方法和Servlet优化【理解】</a></li>
                    <li>
                        <a href="#35%e5%a4%9a%e4%b8%aa%e5%8a%a8%e6%80%81%e8%b5%84%e6%ba%90%e7%90%86%e8%a7%a3" aria-label="3.5多个动态资源【理解】">3.5多个动态资源【理解】</a></li>
                    <li>
                        <a href="#36%e9%80%9a%e8%bf%87%e5%8f%8d%e5%b0%84%e5%92%8c%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%bc%98%e5%8c%96%e7%90%86%e8%a7%a3" aria-label="3.6通过反射和配置文件优化【理解】">3.6通过反射和配置文件优化【理解】</a></li>
                    <li>
                        <a href="#37servlet%e5%bf%98%e8%ae%b0%e5%ae%9e%e7%8e%b0httpservlet%e6%8e%a5%e5%8f%a3%e5%a4%84%e7%90%86%e7%90%86%e8%a7%a3" aria-label="3.7Servlet忘记实现HttpServlet接口处理【理解】">3.7Servlet忘记实现HttpServlet接口处理【理解】</a></li>
                    <li>
                        <a href="#38%e5%93%8d%e5%ba%94404%e7%90%86%e8%a7%a3" aria-label="3.8响应404【理解】">3.8响应404【理解】</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script data-cfasync="false">
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>


  <div class="post-content"><h2 id="1类加载器">1.类加载器<a hidden class="anchor" aria-hidden="true" href="#1类加载器">#</a></h2>
<h3 id="11类加载器理解">1.1类加载器【理解】<a hidden class="anchor" aria-hidden="true" href="#11类加载器理解">#</a></h3>
<ul>
<li>
<p>作用</p>
<p>负责将.class文件（存储的物理文件）加载在到内存中</p>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/01_%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8.png" alt=""  />
</p>
</li>
</ul>
<h3 id="12类加载的过程理解">1.2类加载的过程【理解】<a hidden class="anchor" aria-hidden="true" href="#12类加载的过程理解">#</a></h3>
<ul>
<li>
<p>类加载时机</p>
<ul>
<li>创建类的实例（对象）</li>
<li>调用类的类方法</li>
<li>访问类或者接口的类变量，或者为该类变量赋值</li>
<li>使用反射方式来强制创建某个类或接口对应的java.lang.Class对象</li>
<li>初始化某个类的子类</li>
<li>直接使用java.exe命令来运行某个主类</li>
</ul>
</li>
<li>
<p>类加载过程</p>
<ol>
<li>
<p>加载</p>
<ul>
<li>通过包名 + 类名，获取这个类，准备用流进行传输</li>
<li>在这个类加载到内存中</li>
<li>加载完毕创建一个class对象</li>
</ul>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/02_%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%e5%8a%a0%e8%bd%bd.png" alt=""  />
</p>
</li>
<li>
<p>链接</p>
<ul>
<li>
<p>验证</p>
<p>确保Class文件字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身安全</p>
<p>(文件中的信息是否符合虚拟机规范有没有安全隐患)</p>
</li>
</ul>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/03_%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%e9%aa%8c%e8%af%81.png" alt=""  />
</p>
<ul>
<li>
<p>准备</p>
<p>负责为类的类变量（被static修饰的变量）分配内存，并设置默认初始化值</p>
<p>(初始化静态变量)</p>
</li>
</ul>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/04_%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%e5%87%86%e5%a4%87.png" alt=""  />
</p>
<ul>
<li>
<p>解析</p>
<p>将类的二进制数据流中的符号引用替换为直接引用</p>
<p>(本类中如果用到了其他类，此时就需要找到对应的类)</p>
</li>
</ul>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/05_%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%e8%a7%a3%e6%9e%90.png" alt=""  />
</p>
</li>
<li>
<p>初始化</p>
<p>根据程序员通过程序制定的主观计划去初始化类变量和其他资源</p>
<p>(静态变量赋值以及初始化其他资源)</p>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/06_%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%e5%88%9d%e5%a7%8b%e5%8c%96.png" alt=""  />
</p>
</li>
</ol>
</li>
<li>
<p>小结</p>
<ul>
<li>当一个类被使用的时候，才会加载到内存</li>
<li>类加载的过程: 加载、验证、准备、解析、初始化</li>
</ul>
</li>
</ul>
<h3 id="13类加载的分类理解">1.3类加载的分类【理解】<a hidden class="anchor" aria-hidden="true" href="#13类加载的分类理解">#</a></h3>
<ul>
<li>
<p>分类</p>
<ul>
<li>Bootstrap class loader：虚拟机的内置类加载器，通常表示为null ，并且没有父null</li>
<li>Platform class loader：平台类加载器,负责加载JDK中一些特殊的模块</li>
<li>System class loader：系统类加载器,负责加载用户类路径上所指定的类库</li>
</ul>
</li>
<li>
<p>类加载器的继承关系</p>
<ul>
<li>System的父加载器为Platform</li>
<li>Platform的父加载器为Bootstrap</li>
</ul>
</li>
<li>
<p>代码演示</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassLoaderDemo1</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//获取系统类加载器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ClassLoader systemClassLoader <span style="color:#f92672">=</span> ClassLoader<span style="color:#f92672">.</span><span style="color:#a6e22e">getSystemClassLoader</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//获取系统类加载器的父加载器 --- 平台类加载器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ClassLoader classLoader1 <span style="color:#f92672">=</span> systemClassLoader<span style="color:#f92672">.</span><span style="color:#a6e22e">getParent</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//获取平台类加载器的父加载器 --- 启动类加载器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ClassLoader classLoader2 <span style="color:#f92672">=</span> classLoader1<span style="color:#f92672">.</span><span style="color:#a6e22e">getParent</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;系统类加载器&#34;</span> <span style="color:#f92672">+</span> systemClassLoader<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;平台类加载器&#34;</span> <span style="color:#f92672">+</span> classLoader1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;启动类加载器&#34;</span> <span style="color:#f92672">+</span> classLoader2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="14双亲委派模型理解">1.4双亲委派模型【理解】<a hidden class="anchor" aria-hidden="true" href="#14双亲委派模型理解">#</a></h3>
<ul>
<li>
<p>介绍</p>
<p>如果一个类加载器收到了类加载请求，它并不会自己先去加载，而是把这个请求委托给父类的加载器去执行，如果父类加载器还存在其父类加载器，则进一步向上委托，依次递归，请求最终将到达顶层的启动类加载器，如果父类加载器可以完成类加载任务，就成功返回，倘若父类加载器无法完成此加载任务，子加载器才会尝试自己去加载，这就是双亲委派模式</p>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/07_%e5%8f%8c%e4%ba%b2%e5%a7%94%e6%b4%be%e6%a8%a1%e5%9e%8b.png" alt=""  />
</p>
</li>
</ul>
<h3 id="15classloader-中的两个方法应用">1.5ClassLoader 中的两个方法【应用】<a hidden class="anchor" aria-hidden="true" href="#15classloader-中的两个方法应用">#</a></h3>
<ul>
<li>
<p>方法介绍</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public static ClassLoader getSystemClassLoader()</td>
<td>获取系统类加载器</td>
</tr>
<tr>
<td>public InputStream getResourceAsStream(String name)</td>
<td>加载某一个资源文件</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ClassLoaderDemo2</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//static ClassLoader getSystemClassLoader() 获取系统类加载器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//InputStream getResourceAsStream(String name)  加载某一个资源文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//获取系统类加载器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ClassLoader systemClassLoader <span style="color:#f92672">=</span> ClassLoader<span style="color:#f92672">.</span><span style="color:#a6e22e">getSystemClassLoader</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//利用加载器去加载一个指定的文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//参数：文件的路径（放在src的根目录下，默认去那里加载）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//返回值：字节流。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        InputStream is <span style="color:#f92672">=</span> systemClassLoader<span style="color:#f92672">.</span><span style="color:#a6e22e">getResourceAsStream</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;prop.properties&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Properties prop <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        prop<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span>is<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>prop<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        is<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h2 id="2反射">2.反射<a hidden class="anchor" aria-hidden="true" href="#2反射">#</a></h2>
<h3 id="21反射的概述理解">2.1反射的概述【理解】<a hidden class="anchor" aria-hidden="true" href="#21反射的概述理解">#</a></h3>
<ul>
<li>
<p>反射机制</p>
<p>是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；
对于任意一个对象，都能够调用它的任意属性和方法；
这种动态获取信息以及动态调用对象方法的功能称为Java语言的反射机制。</p>
</li>
</ul>
<h3 id="22获取class类对象的三种方式应用">2.2获取Class类对象的三种方式【应用】<a hidden class="anchor" aria-hidden="true" href="#22获取class类对象的三种方式应用">#</a></h3>
<ul>
<li>
<p>三种方式分类</p>
<ul>
<li>类名.class属性</li>
<li>对象名.getClass()方法</li>
<li>Class.forName(全类名)方法</li>
</ul>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/08_%e8%8e%b7%e5%8f%96Class%e5%af%b9%e8%b1%a1%e7%9a%84%e4%b8%89%e7%a7%8d%e6%96%b9%e5%bc%8f.png" alt=""  />
</p>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Student</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Student</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> age<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">age</span> <span style="color:#f92672">=</span> age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getName</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> name<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getAge</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setAge</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> age<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">age</span> <span style="color:#f92672">=</span> age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">study</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;学生在学习&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Student{&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;name=&#39;&#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;\&#39;&#39;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;, age=&#34;</span> <span style="color:#f92672">+</span> age <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReflectDemo1</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.Class类中的静态方法forName(&#34;全类名&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//全类名:包名 + 类名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect2.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>clazz<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.通过class属性来获取
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz2 <span style="color:#f92672">=</span> Student<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>clazz2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.利用对象的getClass方法来获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//getClass方法是定义在Object类中.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Student s <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Student<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        Class clazz3 <span style="color:#f92672">=</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">getClass</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>clazz3<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>clazz <span style="color:#f92672">==</span> clazz2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>clazz2 <span style="color:#f92672">==</span> clazz3<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="23反射获取构造方法并使用应用">2.3反射获取构造方法并使用【应用】<a hidden class="anchor" aria-hidden="true" href="#23反射获取构造方法并使用应用">#</a></h3>
<h4 id="231class类获取构造方法对象的方法">2.3.1Class类获取构造方法对象的方法<a hidden class="anchor" aria-hidden="true" href="#231class类获取构造方法对象的方法">#</a></h4>
<ul>
<li>
<p>方法介绍</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Constructor<?>[] getConstructors()</td>
<td>返回所有公共构造方法对象的数组</td>
</tr>
<tr>
<td>Constructor<?>[] getDeclaredConstructors()</td>
<td>返回所有构造方法对象的数组</td>
</tr>
<tr>
<td>Constructor<T> getConstructor(Class<?>&hellip; parameterTypes)</td>
<td>返回单个公共构造方法对象</td>
</tr>
<tr>
<td>Constructor<T> getDeclaredConstructor(Class<?>&hellip; parameterTypes)</td>
<td>返回单个构造方法对象</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//私有的有参构造方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">Student</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name的值为:&#34;</span> <span style="color:#f92672">+</span> name<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;private...Student...有参构造方法&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//公共的无参构造方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Student</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;public...Student...无参构造方法&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//公共的有参构造方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Student</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> age<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name的值为:&#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;age的值为:&#34;</span> <span style="color:#f92672">+</span> age<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;public...Student...有参构造方法&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReflectDemo1</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//method1();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method2();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method3();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method4();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method4</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Constructor&lt;T&gt; getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//                                      返回单个构造方法对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取Class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect3.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        Constructor constructor <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredConstructor</span><span style="color:#f92672">(</span>String<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>constructor<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method3</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//                                      返回单个公共构造方法对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取Class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect3.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//小括号中,一定要跟构造方法的形参保持一致.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Constructor constructor1 <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getConstructor</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>constructor1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Constructor constructor2 <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getConstructor</span><span style="color:#f92672">(</span>String<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>constructor2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//因为Student类中,没有只有一个int的构造,所以这里会报错.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Constructor constructor3 <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getConstructor</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>constructor3<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method2</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Constructor&lt;?&gt;[] getDeclaredConstructors()：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//                                      返回所有构造方法对象的数组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取Class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect3.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Constructor<span style="color:#f92672">[]</span> constructors <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredConstructors</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Constructor constructor <span style="color:#f92672">:</span> constructors<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>constructor<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method1</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Constructor&lt;?&gt;[] getConstructors()：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//                                      返回所有公共构造方法对象的数组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取Class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect3.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        Constructor<span style="color:#f92672">[]</span> constructors <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getConstructors</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Constructor constructor <span style="color:#f92672">:</span> constructors<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>constructor<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h4 id="232constructor类用于创建对象的方法">2.3.2Constructor类用于创建对象的方法<a hidden class="anchor" aria-hidden="true" href="#232constructor类用于创建对象的方法">#</a></h4>
<ul>
<li>
<p>方法介绍</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>T newInstance(Object&hellip;initargs)</td>
<td>根据指定的构造方法创建对象</td>
</tr>
<tr>
<td>setAccessible(boolean flag)</td>
<td>设置为true,表示取消访问检查</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Student类同上一个示例,这里就不在重复提供了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReflectDemo2</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException<span style="color:#f92672">,</span> IllegalAccessException<span style="color:#f92672">,</span> InvocationTargetException<span style="color:#f92672">,</span> InstantiationException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//T newInstance(Object... initargs)：根据指定的构造方法创建对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method1();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method2();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method3();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method4();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method4</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException<span style="color:#f92672">,</span> InstantiationException<span style="color:#f92672">,</span> IllegalAccessException<span style="color:#f92672">,</span> InvocationTargetException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//获取一个私有的构造方法并创建对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect3.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取一个私有化的构造方法.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Constructor constructor <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredConstructor</span><span style="color:#f92672">(</span>String<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//被private修饰的成员,不能直接使用的
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//如果用反射强行获取并使用,需要临时取消访问检查
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        constructor<span style="color:#f92672">.</span><span style="color:#a6e22e">setAccessible</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.直接创建对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Student student <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Student<span style="color:#f92672">)</span> constructor<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;zhangsan&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>student<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method3</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> InstantiationException<span style="color:#f92672">,</span> IllegalAccessException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//简写格式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect3.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.在Class类中,有一个newInstance方法,可以利用空参直接创建一个对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Student student <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Student<span style="color:#f92672">)</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span><span style="color:#75715e">//这个方法现在已经过时了,了解一下
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>student<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method2</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException<span style="color:#f92672">,</span> InstantiationException<span style="color:#f92672">,</span> IllegalAccessException<span style="color:#f92672">,</span> InvocationTargetException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect3.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取构造方法对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Constructor constructor <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getConstructor</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.利用空参来创建Student的对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Student student <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Student<span style="color:#f92672">)</span> constructor<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>student<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method1</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException<span style="color:#f92672">,</span> InstantiationException<span style="color:#f92672">,</span> IllegalAccessException<span style="color:#f92672">,</span> InvocationTargetException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect3.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取构造方法对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Constructor constructor <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getConstructor</span><span style="color:#f92672">(</span>String<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.利用newInstance创建Student的对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Student student <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Student<span style="color:#f92672">)</span> constructor<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;zhangsan&#34;</span><span style="color:#f92672">,</span> 23<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>student<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h4 id="233小结">2.3.3小结<a hidden class="anchor" aria-hidden="true" href="#233小结">#</a></h4>
<ul>
<li>
<p>获取class对象</p>
<p>三种方式: Class.forName(“全类名”), 类名.class, 对象名.getClass()</p>
</li>
<li>
<p>获取里面的构造方法对象</p>
<p>getConstructor (Class<?>&hellip; parameterTypes)
getDeclaredConstructor (Class<?>&hellip; parameterTypes)</p>
</li>
<li>
<p>如果是public的，直接创建对象</p>
<p>newInstance(Object&hellip; initargs)</p>
</li>
<li>
<p>如果是非public的，需要临时取消检查，然后再创建对象</p>
<p>setAccessible(boolean)  暴力反射</p>
</li>
</ul>
<h3 id="24反射获取成员变量并使用应用">2.4反射获取成员变量并使用【应用】<a hidden class="anchor" aria-hidden="true" href="#24反射获取成员变量并使用应用">#</a></h3>
<h4 id="241class类获取成员变量对象的方法">2.4.1Class类获取成员变量对象的方法<a hidden class="anchor" aria-hidden="true" href="#241class类获取成员变量对象的方法">#</a></h4>
<ul>
<li>
<p>方法分类</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Field[] getFields()</td>
<td>返回所有公共成员变量对象的数组</td>
</tr>
<tr>
<td>Field[] getDeclaredFields()</td>
<td>返回所有成员变量对象的数组</td>
</tr>
<tr>
<td>Field getField(String name)</td>
<td>返回单个公共成员变量对象</td>
</tr>
<tr>
<td>Field getDeclaredField(String name)</td>
<td>返回单个成员变量对象</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String name<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String gender<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> money <span style="color:#f92672">=</span> 300<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Student{&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;name=&#39;&#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;\&#39;&#39;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;, age=&#34;</span> <span style="color:#f92672">+</span> age <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;, gender=&#39;&#34;</span> <span style="color:#f92672">+</span> gender <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;\&#39;&#39;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;, money=&#34;</span> <span style="color:#f92672">+</span> money <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReflectDemo1</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchFieldException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">// method1();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method2();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method3();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method4();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method4</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchFieldException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Field getDeclaredField(String name)：返回单个成员变量对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect4.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取money成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Field field <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredField</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;money&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.打印一下
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>field<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method3</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchFieldException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Field getField(String name)：返回单个公共成员变量对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//想要获取的成员变量必须是真实存在的
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//且必须是public修饰的.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect4.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取name这个成员变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//Field field = clazz.getField(&#34;name&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//Field field = clazz.getField(&#34;name1&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Field field <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getField</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;money&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.打印一下
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>field<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method2</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Field[] getDeclaredFields()：返回所有成员变量对象的数组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect4.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取所有的Field对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Field<span style="color:#f92672">[]</span> fields <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredFields</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.遍历
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Field field <span style="color:#f92672">:</span> fields<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>field<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method1</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Field[] getFields()：返回所有公共成员变量对象的数组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect4.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取Field对象.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Field<span style="color:#f92672">[]</span> fields <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getFields</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.遍历
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Field field <span style="color:#f92672">:</span> fields<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>field<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h4 id="242field类用于给成员变量赋值的方法">2.4.2Field类用于给成员变量赋值的方法<a hidden class="anchor" aria-hidden="true" href="#242field类用于给成员变量赋值的方法">#</a></h4>
<ul>
<li>
<p>方法介绍</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>void set(Object obj, Object value)</td>
<td>赋值</td>
</tr>
<tr>
<td>Object get(Object obj)</td>
<td>获取值</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Student类同上一个示例,这里就不在重复提供了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReflectDemo2</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchFieldException<span style="color:#f92672">,</span> IllegalAccessException<span style="color:#f92672">,</span> InstantiationException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        Object get(Object obj) 返回由该 Field表示的字段在指定对象上的值。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method1();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method2();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method2</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchFieldException<span style="color:#f92672">,</span> InstantiationException<span style="color:#f92672">,</span> IllegalAccessException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect4.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取成员变量Field的对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Field field <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredField</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;money&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.取消一下访问检查
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        field<span style="color:#f92672">.</span><span style="color:#a6e22e">setAccessible</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//4.调用get方法来获取值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//4.1创建一个对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Student student <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Student<span style="color:#f92672">)</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//4.2获取指定对象的money的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Object o <span style="color:#f92672">=</span> field<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>student<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//5.打印一下
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>o<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method1</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchFieldException<span style="color:#f92672">,</span> InstantiationException<span style="color:#f92672">,</span> IllegalAccessException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        void set(Object obj, Object value)：给obj对象的成员变量赋值为value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect4.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取name这个Field对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Field field <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getField</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.利用set方法进行赋值.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//3.1先创建一个Student对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Student student <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Student<span style="color:#f92672">)</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.2有了对象才可以给指定对象进行赋值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        field<span style="color:#f92672">.</span><span style="color:#a6e22e">set</span><span style="color:#f92672">(</span>student<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;zhangsan&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>student<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="25反射获取成员方法并使用应用">2.5反射获取成员方法并使用【应用】<a hidden class="anchor" aria-hidden="true" href="#25反射获取成员方法并使用应用">#</a></h3>
<h4 id="251class类获取成员方法对象的方法">2.5.1Class类获取成员方法对象的方法<a hidden class="anchor" aria-hidden="true" href="#251class类获取成员方法对象的方法">#</a></h4>
<ul>
<li>
<p>方法分类</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method[] getMethods()</td>
<td>返回所有公共成员方法对象的数组，包括继承的</td>
</tr>
<tr>
<td>Method[] getDeclaredMethods()</td>
<td>返回所有成员方法对象的数组，不包括继承的</td>
</tr>
<tr>
<td>Method getMethod(String name, Class<?>&hellip; parameterTypes)</td>
<td>返回单个公共成员方法对象</td>
</tr>
<tr>
<td>Method getDeclaredMethod(String name, Class<?>&hellip; parameterTypes)</td>
<td>返回单个成员方法对象</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//私有的，无参无返回值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">show</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;私有的show方法，无参无返回值&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//公共的，无参无返回值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">function1</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;function1方法，无参无返回值&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//公共的，有参无返回值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">function2</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;function2方法，有参无返回值,参数为&#34;</span> <span style="color:#f92672">+</span> name<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//公共的，无参有返回值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">function3</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;function3方法，无参有返回值&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;aaa&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//公共的，有参有返回值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">function4</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;function4方法，有参有返回值,参数为&#34;</span> <span style="color:#f92672">+</span> name<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;aaa&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReflectDemo1</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//method1();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method2();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method3();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method4();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//method5();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method5</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Method getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//                                返回单个成员方法对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect5.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取一个成员方法show
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Method method <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredMethod</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;show&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.打印一下
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>method<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method4</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect5.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取一个有形参的方法function2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Method method <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getMethod</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;function2&#34;</span><span style="color:#f92672">,</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.打印一下
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>method<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method3</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Method getMethod(String name, Class&lt;?&gt;... parameterTypes) ：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//                                返回单个公共成员方法对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect5.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取成员方法function1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Method method1 <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getMethod</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;function1&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.打印一下
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>method1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method2</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Method[] getDeclaredMethods()：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//                                返回所有成员方法对象的数组，不包括继承的
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect5.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取Method对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Method<span style="color:#f92672">[]</span> methods <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredMethods</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.遍历一下数组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Method method <span style="color:#f92672">:</span> methods<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>method<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method1</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//        Method[] getMethods()：返回所有公共成员方法对象的数组，包括继承的
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect5.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取成员方法对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Method<span style="color:#f92672">[]</span> methods <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getMethods</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.遍历
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Method method <span style="color:#f92672">:</span> methods<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>method<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h4 id="252method类用于执行方法的方法">2.5.2Method类用于执行方法的方法<a hidden class="anchor" aria-hidden="true" href="#252method类用于执行方法的方法">#</a></h4>
<ul>
<li>
<p>方法介绍</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Object invoke(Object obj, Object&hellip; args)</td>
<td>运行方法</td>
</tr>
</tbody>
</table>
<p>参数一: 用obj对象调用该方法</p>
<p>参数二: 调用方法的传递的参数(如果没有就不写)</p>
<p>返回值: 方法的返回值(如果没有就不写)</p>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReflectDemo2</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">,</span> NoSuchMethodException<span style="color:#f92672">,</span> IllegalAccessException<span style="color:#f92672">,</span> InstantiationException<span style="color:#f92672">,</span> InvocationTargetException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        Object invoke(Object obj, Object... args)：运行方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//        参数一：用obj对象调用该方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//        参数二：调用方法的传递的参数（如果没有就不写）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//        返回值：方法的返回值（如果没有就不写）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.获取class对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.itheima.myreflect5.Student&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.获取里面的Method对象  function4
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Method method <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getMethod</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;function4&#34;</span><span style="color:#f92672">,</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.运行function4方法就可以了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//3.1创建一个Student对象,当做方法的调用者
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Student student <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Student<span style="color:#f92672">)</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.2运行方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Object result <span style="color:#f92672">=</span> method<span style="color:#f92672">.</span><span style="color:#a6e22e">invoke</span><span style="color:#f92672">(</span>student<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;zhangsan&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//4.打印一下返回值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>result<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h2 id="3http服务器改写">3.http服务器改写<a hidden class="anchor" aria-hidden="true" href="#3http服务器改写">#</a></h2>
<h3 id="31静态资源和动态资源理解">3.1静态资源和动态资源【理解】<a hidden class="anchor" aria-hidden="true" href="#31静态资源和动态资源理解">#</a></h3>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/11_%e8%af%b7%e6%b1%82%e8%b5%84%e6%ba%90%e5%88%86%e7%b1%bb.png" alt=""  />
</p>
<ul>
<li>
<p>静态资源</p>
<p>在服务器提前准备好的文件。(图片，文本)</p>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/09_%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90.png" alt=""  />
</p>
</li>
<li>
<p>动态资源</p>
<p>在图示的案例中，当用户点击了浏览器上的按钮。
本质上访问的就是服务端的某一个类中的某一个方法。
在方法中，可以写一些判断代码和逻辑代码，让响应的内容，有可能不一样了。
那么，服务端所对应的这个类我们常常将其称之为“动态资源”</p>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/10_%e5%8a%a8%e6%80%81%e8%b5%84%e6%ba%90.png" alt=""  />
</p>
</li>
</ul>
<h3 id="32准备工作理解">3.2准备工作【理解】<a hidden class="anchor" aria-hidden="true" href="#32准备工作理解">#</a></h3>
<ul>
<li>
<p>修改四个地方</p>
<ul>
<li>HttpResponse -&gt; 常量WEB_APP_PATH的值与当前模块一致</li>
<li>HttpServer -&gt; main方法中端口改成80</li>
<li>HttpResponse -&gt; 添加一个write方法，添加一个带参数的构造方法</li>
<li>HttpResponse -&gt; 添加一个contentType成员变量，生成对应的set/get方法</li>
</ul>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 1.HttpResponse -&gt; 常量WEB_APP_PATH的值与当前模块一致
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpResponse</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String WEB_APP_PATH <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http-dynamic-server\\webapp&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2.HttpServer -&gt; main方法中端口改成80
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpServer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//2.让这个通道绑定一个端口
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  	serverSocketChannel<span style="color:#f92672">.</span><span style="color:#a6e22e">bind</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> InetSocketAddress<span style="color:#f92672">(</span>80<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 3.HttpResponse -&gt; 添加一个write方法，添加一个带参数的构造方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpResponse</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 已经提供了selectionKey，所以之前的方法接收这个参数的可以去掉了，直接使用这个即可
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// HttpRequest也按照此方式进行优化，定义成员变量，在构造方法中赋值，其他方法直接使用即可
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">private</span> SelectionKey selectionKey<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">HttpResponse</span><span style="color:#f92672">(</span>SelectionKey selectionKey<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">selectionKey</span> <span style="color:#f92672">=</span> selectionKey<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//给浏览器响应数据的方法 ---- 浏览器在请求动态资源时,响应数据的方法.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//content:响应的内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>String content<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpServer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//响应数据  //修改后的构造方法中要传入参数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    HttpResponse httpResponse <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HttpResponse<span style="color:#f92672">(</span>selectionKey<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 4.HttpResponse -&gt; 添加一个contentType成员变量，生成对应的set/get方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpResponse</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> String contentType<span style="color:#f92672">;</span><span style="color:#75715e">//MIME类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getContentType</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> contentType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setContentTpye</span><span style="color:#f92672">(</span>String contentType<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">contentType</span> <span style="color:#f92672">=</span> contentType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//添加到map集合中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        hm<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">,</span>contentType<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="33浏览器请求动态资源理解">3.3浏览器请求动态资源【理解】<a hidden class="anchor" aria-hidden="true" href="#33浏览器请求动态资源理解">#</a></h3>
<ul>
<li>
<p>两个小问题</p>
<ul>
<li>
<p>服务器如何判断浏览器请求的是静态资源还是动态资源?</p>
<p>我们可以规定：如果浏览器地址栏中的uri是以”/servlet”开始的，那么就表示请求动态资源</p>
</li>
<li>
<p>在一个项目中有很多类，很多方法。那么请求过来之后，执行哪个方法呢?</p>
<p>写一个UserServlet类，在类中写service方法
我们可以规定：如果请求动态资源，就创建这个类对象，并调用service方法，表示服务器处理了当前请求</p>
</li>
</ul>
</li>
<li>
<p>实现步骤</p>
<ol>
<li>
<p>解析http请求</p>
</li>
<li>
<p>处理浏览器请求</p>
<p>定义一个UserServlet 类，类中定义service方法，处理浏览器请求动态资源
解析完http请求之后，再判断uri是否以/servlet开头</p>
</li>
<li>
<p>响应</p>
</li>
</ol>
</li>
<li>
<p>示例代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserServlet</span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">service</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//模拟业务处理  ---- 就可以对这个手机号进行判断验证
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UserServlet处理了用户的请求...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpServer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#75715e">//响应数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    	HttpResponse httpResponse <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HttpResponse<span style="color:#f92672">(</span>selectionKey<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setHttpRequest</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">getRequestURI</span><span style="color:#f92672">().</span><span style="color:#a6e22e">startsWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/servlet&#34;</span><span style="color:#f92672">)){</span>
</span></span><span style="display:flex;"><span>          	<span style="color:#75715e">//本次请求动态资源
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          	<span style="color:#75715e">//处理 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          	UserServlet userServlet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> UserServlet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>          	userServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>          	<span style="color:#75715e">//响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        	httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTpye</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;text/html;charset=UTF-8&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        	httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ok,UserServlet处理了本次请求....&#34;</span><span style="color:#f92672">);</span>  
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#75715e">//本次请求静态资源
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">sendStaticResource</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpResponse</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  	<span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//给浏览器响应数据的方法 ---- 浏览器在请求动态资源时,响应数据的方法.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//content:响应的内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>String content<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//准备响应行数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">version</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;HTTP/1.1&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">status</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;200&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">desc</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ok&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//把响应行拼接在一起
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        String responseLine <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">version</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">status</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">desc</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\r\n&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//准备响应头
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        StringBuilder sb <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuilder<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        Set<span style="color:#f92672">&lt;</span>Map<span style="color:#f92672">.</span><span style="color:#a6e22e">Entry</span><span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> String<span style="color:#f92672">&gt;&gt;</span> entries <span style="color:#f92672">=</span> hm<span style="color:#f92672">.</span><span style="color:#a6e22e">entrySet</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Map<span style="color:#f92672">.</span><span style="color:#a6e22e">Entry</span><span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> String<span style="color:#f92672">&gt;</span> entry <span style="color:#f92672">:</span> entries<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//entry依次表示每一个键值对对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//键 --- 响应头的名称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//值 --- 响应头的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            sb<span style="color:#f92672">.</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>entry<span style="color:#f92672">.</span><span style="color:#a6e22e">getKey</span><span style="color:#f92672">()).</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;: &#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span>entry<span style="color:#f92672">.</span><span style="color:#a6e22e">getValue</span><span style="color:#f92672">()).</span><span style="color:#a6e22e">append</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;\r\n&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//处理响应空行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        String emptyLine <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\r\n&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//拼接响应行,响应头,响应空行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        String result <span style="color:#f92672">=</span> responseLine <span style="color:#f92672">+</span> sb<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> emptyLine<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//给浏览器响应 响应行,响应头,响应空行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            ByteBuffer byteBuffer1 <span style="color:#f92672">=</span> ByteBuffer<span style="color:#f92672">.</span><span style="color:#a6e22e">wrap</span><span style="color:#f92672">(</span>result<span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>            SocketChannel channel <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>SocketChannel<span style="color:#f92672">)</span> selectionKey<span style="color:#f92672">.</span><span style="color:#a6e22e">channel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>byteBuffer1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//给浏览器响应 响应体
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            ByteBuffer byteBuffer2 <span style="color:#f92672">=</span> ByteBuffer<span style="color:#f92672">.</span><span style="color:#a6e22e">wrap</span><span style="color:#f92672">(</span>content<span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>byteBuffer2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//释放资源
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;响应数据失败....&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>    
</span></span><span style="display:flex;"><span> 	 <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="34main方法和servlet优化理解">3.4main方法和Servlet优化【理解】<a hidden class="anchor" aria-hidden="true" href="#34main方法和servlet优化理解">#</a></h3>
<ul>
<li>
<p>main方法优化</p>
<ul>
<li>
<p>需求</p>
<p>将请求动态资源的代码抽取到一个单独的类单独的方法中，简化main中的代码</p>
</li>
<li>
<p>代码实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DynamicResourceProcess</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//执行指定动态资源的service方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数一
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//由于后期可能根据用户请求的uri做出相应的处理.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数二
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//要给用户响应数据,那么就需要使用到httpResponse.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">process</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span>HttpResponse httpResponse<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建UserServlet对象,调用service方法,进行处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        UserServlet userServlet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> UserServlet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        userServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//给浏览器响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTpye</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;text/html;charset=UTF-8&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ok,UserServlet处理了本次请求....&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpServer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#75715e">//响应数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    	HttpResponse httpResponse <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HttpResponse<span style="color:#f92672">(</span>selectionKey<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setHttpRequest</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">getRequestURI</span><span style="color:#f92672">().</span><span style="color:#a6e22e">startsWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/servlet&#34;</span><span style="color:#f92672">)){</span>
</span></span><span style="display:flex;"><span>          	<span style="color:#75715e">//本次请求动态资源
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       		DynamicResourceProcess drp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicResourceProcess<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            drp<span style="color:#f92672">.</span><span style="color:#a6e22e">process</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">,</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#75715e">//本次请求静态资源
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">sendStaticResource</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> 
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>Servlet优化</p>
<ul>
<li>
<p>需求</p>
<p>将给浏览器响应的代码写到Servlet中</p>
</li>
<li>
<p>代码实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserServlet</span> <span style="color:#66d9ef">implements</span> HttpServlet<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//处理浏览器请求的方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数一
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//由于后期可能根据用户请求的uri做出相应的处理.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数二
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//要给用户响应数据,那么就需要使用到httpResponse.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span> HttpResponse httpResponse<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//模拟业务处理  ---- 就可以对这个手机号进行判断验证
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UserServlet处理了用户的请求...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//给浏览器响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTpye</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;text/html;charset=UTF-8&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ok,UserServlet处理了本次请求....&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DynamicResourceProcess</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//执行指定动态资源的service方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数一
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//由于后期可能根据用户请求的uri做出相应的处理.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数二
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//要给用户响应数据,那么就需要使用到httpResponse.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">process</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span>HttpResponse httpResponse<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建UserServlet对象,调用service方法,进行处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        UserServlet userServlet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> UserServlet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        userServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">,</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="35多个动态资源理解">3.5多个动态资源【理解】<a hidden class="anchor" aria-hidden="true" href="#35多个动态资源理解">#</a></h3>
<ul>
<li>
<p>多个动态资源</p>
<p>针对每一个业务操作，我们都会去定义一个对应的Servlet来完成。
就会在服务端产生很多个Servlet</p>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/12_%e5%a4%9a%e4%b8%aa%e5%8a%a8%e6%80%81%e8%b5%84%e6%ba%90.png" alt=""  />
</p>
</li>
<li>
<p>实现步骤</p>
<ul>
<li>定义一个接口HttpServlet，接口中定义service方法。</li>
<li>针对于每一种业务，都定义一个servlet类与之对应，该类实现HttpServlet接口</li>
<li>获取请求的uri，进行判断，调用不同的servlet类中的service方法</li>
</ul>
</li>
<li>
<p>代码实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 1.定义一个接口HttpServlet，接口中定义service方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">HttpServlet</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//定义业务处理的方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span> HttpResponse httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2.针对于每一种业务，都定义一个servlet类与之对应，该类实现HttpServlet接口
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UserServlet</span> <span style="color:#66d9ef">implements</span> HttpServlet<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//处理浏览器请求的方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数一
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//由于后期可能根据用户请求的uri做出相应的处理.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数二
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//要给用户响应数据,那么就需要使用到httpResponse.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span> HttpResponse httpResponse<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//模拟业务处理  ---- 就可以对这个手机号进行判断验证
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UserServlet处理了用户的请求...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//给浏览器响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTpye</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;text/html;charset=UTF-8&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ok,UserServlet处理了本次请求....&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LoginServlet</span> <span style="color:#66d9ef">implements</span> HttpServlet<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span> HttpResponse httpResponse<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">//处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;LoginServlet处理了登录请求&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">//响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTpye</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;text/html;charset=UTF-8&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;登录成功&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RegisterServlet</span> <span style="color:#66d9ef">implements</span> HttpServlet<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span> HttpResponse httpResponse<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">//处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;RegisterServlet处理了注册请求&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">//响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTpye</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;text/html;charset=UTF-8&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;注册成功&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SearchServlet</span> <span style="color:#66d9ef">implements</span> HttpServlet<span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span> HttpResponse httpResponse<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">//处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;SearchServlet处理了搜索商品请求&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>       <span style="color:#75715e">//响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentTpye</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;text/html;charset=UTF-8&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;响应了一些商品信息&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 3.获取请求的uri，进行判断，调用不同的servlet类中的service方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DynamicResourceProcess</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">process</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span>HttpResponse httpResponse<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>          <span style="color:#75715e">//获取请求的uri
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          String requestURI <span style="color:#f92672">=</span> httpRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">getRequestURI</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          <span style="color:#75715e">//根据请求的uri进行判断
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/servlet/loginservlet&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>requestURI<span style="color:#f92672">)){</span>
</span></span><span style="display:flex;"><span>              <span style="color:#75715e">//登录请求
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              LoginServlet loginServlet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LoginServlet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>              loginServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">,</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/servlet/registerservlet&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>requestURI<span style="color:#f92672">)){</span>
</span></span><span style="display:flex;"><span>              <span style="color:#75715e">//注册请求
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              RegisterServlet registerServlet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RegisterServlet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>              registerServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">,</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/servlet/searchservlet&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>requestURI<span style="color:#f92672">)){</span>
</span></span><span style="display:flex;"><span>              <span style="color:#75715e">//搜索商品请求
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              SearchServlet searchServlet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SearchServlet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>              searchServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">,</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>              <span style="color:#75715e">//表示默认处理方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              <span style="color:#75715e">//创建UserServlet对象,调用service方法,进行处理
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              UserServlet userServlet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> UserServlet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>              userServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">,</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="36通过反射和配置文件优化理解">3.6通过反射和配置文件优化【理解】<a hidden class="anchor" aria-hidden="true" href="#36通过反射和配置文件优化理解">#</a></h3>
<ul>
<li>
<p>优化步骤</p>
<ol>
<li>
<p>把Servlet信息写到properties配置文件中</p>
<p>格式为：servlet-info=/servlet/UserServlet，全类名；/servlet/loginServlet，全类名</p>
</li>
<li>
<p>定义一个接口ServletConcurrentHashMap，接口中定义ConcurrentHashMap，该集合存储所有的servlet信息</p>
</li>
<li>
<p>定义一个接口ParseServletConfig，该接口中定义一个方法（parse）</p>
</li>
<li>
<p>定义ParseServletConfig的实现类，解析配置文件，并把配置文件中Servlet信息存到map集合中</p>
</li>
<li>
<p>在main方法的第一行，开启一条线程执行解析配置文件的代码</p>
</li>
<li>
<p>修改处理DynamicResourceProcess中的process方法</p>
<p><img loading="lazy" src="/images/Java%e5%9f%ba%e7%a1%80%e5%8a%a0%e5%bc%ba01/13_%e5%8f%8d%e5%b0%84%e5%92%8c%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e4%bc%98%e5%8c%96.png" alt=""  />
</p>
</li>
</ol>
</li>
<li>
<p>代码实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 1.把Servlet信息写到properties配置文件中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 在webapp\config\servlet-info.properties文件中，写入如下内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>servlet<span style="color:#f92672">-</span>info<span style="color:#f92672">=/</span>servlet<span style="color:#f92672">/</span>loginservlet<span style="color:#f92672">,</span>com<span style="color:#f92672">.</span><span style="color:#a6e22e">itheima</span><span style="color:#f92672">.</span><span style="color:#a6e22e">myservlet</span><span style="color:#f92672">.</span><span style="color:#a6e22e">LoginServlet</span><span style="color:#f92672">;/</span>servlet<span style="color:#f92672">/</span>registerservlet<span style="color:#f92672">,</span>com<span style="color:#f92672">.</span><span style="color:#a6e22e">itheima</span><span style="color:#f92672">.</span><span style="color:#a6e22e">myservlet</span><span style="color:#f92672">.</span><span style="color:#a6e22e">RegisterServlet</span><span style="color:#f92672">;/</span>servlet<span style="color:#f92672">/</span>searchservlet<span style="color:#f92672">,</span>com<span style="color:#f92672">.</span><span style="color:#a6e22e">itheima</span><span style="color:#f92672">.</span><span style="color:#a6e22e">myservlet</span><span style="color:#f92672">.</span><span style="color:#a6e22e">SearchServlet</span><span style="color:#f92672">;/</span>servlet<span style="color:#f92672">/</span>lostpasswordservlet<span style="color:#f92672">,</span>com<span style="color:#f92672">.</span><span style="color:#a6e22e">itheima</span><span style="color:#f92672">.</span><span style="color:#a6e22e">myservlet</span><span style="color:#f92672">.</span><span style="color:#a6e22e">LostPasswordServlet</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2.定义一个接口ServletConcurrentHashMap，接口中定义ConcurrentHashMap，该集合存储所有的servlet信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">ServletConcurrentHashMap</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//存储请求路径和对应的servlet的map集合
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//键: 请求的uri
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//值: 对应的Servlet对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> ConcurrentHashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span>  HttpServlet<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ConcurrentHashMap<span style="color:#f92672">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 3.定义一个接口ParseServletConfig，该接口中定义一个方法（parse）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">ParseServletConfig</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//解析数据的方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">parse</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 4.定义ParseServletConfig的实现类，解析配置文件，并把配置文件中Servlet信息存到map集合中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PropertiesParseServletConfig</span> <span style="color:#66d9ef">implements</span> ParseServletConfig <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">parse</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//1.读取配置文件中的数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            Properties properties <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            FileReader fr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileReader<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;http-dynamic-server/webapp/config/servlet-info.properties&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            properties<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span>fr<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            fr<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//2.获取集合中servlet-info的属性值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String properValue <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>String<span style="color:#f92672">)</span> properties<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;servlet-info&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// uri,全类名;uri,全类名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//3.解析
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String<span style="color:#f92672">[]</span> split <span style="color:#f92672">=</span> properValue<span style="color:#f92672">.</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String servletInfo <span style="color:#f92672">:</span> split<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                String<span style="color:#f92672">[]</span> servletInfoArr <span style="color:#f92672">=</span> servletInfo<span style="color:#f92672">.</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                String uri <span style="color:#f92672">=</span> servletInfoArr<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>                String servletName <span style="color:#f92672">=</span> servletInfoArr<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//我们需要通过servletName(全类名)来创建他的对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span>servletName<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                HttpServlet httpServlet <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>HttpServlet<span style="color:#f92672">)</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//4.将uri和httpServlet添加到map集合中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                ServletConcurrentHashMap<span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>uri<span style="color:#f92672">,</span>httpServlet<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;解析数据异常.....&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LoaderResourceRunnable</span> <span style="color:#66d9ef">implements</span>  Runnable <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//执行parse方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ParseServletConfig parseServletConfig <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PropertiesParseServletConfig<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        parseServletConfig<span style="color:#f92672">.</span><span style="color:#a6e22e">parse</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 5.在main方法的第一行，开启一条线程执行解析配置文件的代码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HttpServer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//开启一条线程去解析配置文件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">new</span> Thread<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> LoaderResourceRunnable<span style="color:#f92672">()).</span><span style="color:#a6e22e">start</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 6.修改处理DynamicResourceProcess中的process方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DynamicResourceProcess</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">process</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span>HttpResponse httpResponse<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>          	<span style="color:#75715e">//获取请求的uri
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          	String requestURI <span style="color:#f92672">=</span> httpRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">getRequestURI</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>          	<span style="color:#75715e">//根据请求的uri到map集合中直接找到对应的servlet的对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        	HttpServlet httpServlet <span style="color:#f92672">=</span> ServletConcurrentHashMap<span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>requestURI<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//调用service方法对请求进行处理并响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            httpServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">,</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>    
</span></span></code></pre></div></li>
</ul>
<h3 id="37servlet忘记实现httpservlet接口处理理解">3.7Servlet忘记实现HttpServlet接口处理【理解】<a hidden class="anchor" aria-hidden="true" href="#37servlet忘记实现httpservlet接口处理理解">#</a></h3>
<ul>
<li>
<p>出现情况</p>
<p>在写Servlet时，忘记了实现HttpServlet接口</p>
</li>
<li>
<p>导致结果</p>
<p>在反射创建对象后，强转成HttpServlet时，会报类型转换异常</p>
</li>
<li>
<p>解决方案</p>
<p>在反射创建对象后，强转成HttpServlet前，进行判断</p>
<p>如果有实现HttpServlet接口，就进行强转</p>
<p>否则抛出一个异常</p>
</li>
<li>
<p>代码实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PropertiesParseServletConfig</span> <span style="color:#66d9ef">implements</span> ParseServletConfig <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">parse</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//1.读取配置文件中的数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            Properties properties <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            FileReader fr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FileReader<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;http-dynamic-server/webapp/config/servlet-info.properties&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            properties<span style="color:#f92672">.</span><span style="color:#a6e22e">load</span><span style="color:#f92672">(</span>fr<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            fr<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//2.获取集合中servlet-info的属性值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String properValue <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>String<span style="color:#f92672">)</span> properties<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;servlet-info&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// uri,全类名;uri,全类名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//3.解析
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String<span style="color:#f92672">[]</span> split <span style="color:#f92672">=</span> properValue<span style="color:#f92672">.</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>String servletInfo <span style="color:#f92672">:</span> split<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                String<span style="color:#f92672">[]</span> servletInfoArr <span style="color:#f92672">=</span> servletInfo<span style="color:#f92672">.</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                String uri <span style="color:#f92672">=</span> servletInfoArr<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>                String servletName <span style="color:#f92672">=</span> servletInfoArr<span style="color:#f92672">[</span>1<span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//我们需要通过servletName(全类名)来创建他的对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                Class clazz <span style="color:#f92672">=</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">forName</span><span style="color:#f92672">(</span>servletName<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//获取该类所实现的所有的接口信息,得到的是一个数组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                Class<span style="color:#f92672">[]</span> interfaces <span style="color:#f92672">=</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getInterfaces</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//定义一个boolean类型的变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">boolean</span> flag <span style="color:#f92672">=</span>  <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//遍历数组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Class clazzInfo <span style="color:#f92672">:</span> interfaces<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">//判断当前所遍历的接口的字节码对象是否和HttpServlet的字节码文件对象相同
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>clazzInfo <span style="color:#f92672">==</span> HttpServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                        <span style="color:#75715e">//如果相同,就需要更改flag值.结束循环
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                        flag <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>flag<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">//true就表示当前的类已经实现了HttpServlet接口
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    HttpServlet httpServlet <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>HttpServlet<span style="color:#f92672">)</span> clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">newInstance</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">//4.将uri和httpServlet添加到map集合中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    ServletConcurrentHashMap<span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>uri<span style="color:#f92672">,</span>httpServlet<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">//false就表示当前的类还没有实现HttpServlet接口
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> NotImplementsHttpServletException<span style="color:#f92672">(</span>clazz<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;Not Implements HttpServlet&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>NotImplementsHttpServletException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span><span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;解析数据异常.....&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="38响应404理解">3.8响应404【理解】<a hidden class="anchor" aria-hidden="true" href="#38响应404理解">#</a></h3>
<ul>
<li>
<p>出现情况</p>
<p>客户端浏览器请求了一个服务器中不存在的动态资源</p>
</li>
<li>
<p>导致结果</p>
<p>服务器中代码出现异常，程序停止</p>
</li>
<li>
<p>解决方案</p>
<p>如果请求的动态资源不存在，服务器根据请求的uri找到对应的Servlet时为null，继续调用方法会出现异常</p>
<p>增加一个非空的判断，如果不为null，则继续处理请求，调用方法</p>
<p>如果为null，则响应404</p>
</li>
<li>
<p>代码实现</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DynamicResourceProcess</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//执行指定动态资源的service方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数一
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//由于后期可能根据用户请求的uri做出相应的处理.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//参数二
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//要给用户响应数据,那么就需要使用到httpResponse.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">process</span><span style="color:#f92672">(</span>HttpRequest httpRequest<span style="color:#f92672">,</span>HttpResponse httpResponse<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//获取请求的uri
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        String requestURI <span style="color:#f92672">=</span> httpRequest<span style="color:#f92672">.</span><span style="color:#a6e22e">getRequestURI</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//根据请求的uri到map集合中直接找到对应的servlet的对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        HttpServlet httpServlet <span style="color:#f92672">=</span> ServletConcurrentHashMap<span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>requestURI<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>httpServlet <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//调用service方法对请求进行处理并响应
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            httpServlet<span style="color:#f92672">.</span><span style="color:#a6e22e">service</span><span style="color:#f92672">(</span>httpRequest<span style="color:#f92672">,</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//浏览器请求的动态资源不存在
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">//响应404
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            response404<span style="color:#f92672">(</span>httpResponse<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//浏览器请求动态资源不存在,响应404的方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">response404</span><span style="color:#f92672">(</span>HttpResponse httpResponse<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//准备响应行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String responseLine <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;HTTP/1.1 404 NOT FOUND\r\n&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//准备响应头
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String responseHeader <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Content-Type: text/html;charset=UTF-8\r\n&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//准备响应空行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String emptyLine <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\r\n&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//拼接在一起
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String result <span style="color:#f92672">=</span> responseLine <span style="color:#f92672">+</span> responseHeader <span style="color:#f92672">+</span> emptyLine<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//把响应行,响应头,响应空行去响应给浏览器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            SelectionKey selectionKey <span style="color:#f92672">=</span> httpResponse<span style="color:#f92672">.</span><span style="color:#a6e22e">getSelectionKey</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            SocketChannel channel <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>SocketChannel<span style="color:#f92672">)</span> selectionKey<span style="color:#f92672">.</span><span style="color:#a6e22e">channel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            ByteBuffer byteBuffer1 <span style="color:#f92672">=</span> ByteBuffer<span style="color:#f92672">.</span><span style="color:#a6e22e">wrap</span><span style="color:#f92672">(</span>result<span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>byteBuffer1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//给浏览器 响应 响应体内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            ByteBuffer byteBuffer2 <span style="color:#f92672">=</span> ByteBuffer<span style="color:#f92672">.</span><span style="color:#a6e22e">wrap</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;404 NOT FOUND....&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">write</span><span style="color:#f92672">(</span>byteBuffer2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//释放资源
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>IOException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://iblog.zone/tags/%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%BC%BA/">基础加强</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://iblog.zone/archives/java%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%BC%BA02/">
    <span class="title">« 上一页</span>
    <br>
    <span>Java基础加强02</span>
  </a>
  <a class="next" href="https://iblog.zone/archives/%E8%A7%A3%E5%86%B3docker%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E5%A4%AA%E5%A4%A7%E7%9A%84%E9%97%AE%E9%A2%98/">
    <span class="title">下一页 »</span>
    <br>
    <span>解决Docker日志文件太大的问题</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://iblog.zone">ylw&#39;s blog</a></span>
    <span>
	& <a href="https://beian.miit.gov.cn" rel="noopener" target="_blank">京ICP备2021039488号</a>
    </span>

    总访客：<span id="busuanzi_value_site_uv"></span>
    总浏览量：<span id="busuanzi_value_site_pv"></span>
    页面访问量：<span id="busuanzi_value_page_pv"></span>

</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '复制';

        function copyingDone() {
            copybutton.innerText = '已复制！';
            setTimeout(() => {
                copybutton.innerText = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
